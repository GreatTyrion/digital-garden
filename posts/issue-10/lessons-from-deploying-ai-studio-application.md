# 我把AI Studio应用部署上线了，这是你需要知道的5个关键教训

## 引言：从AI实验场到真实世界

近来，使用Google AI Studio和Gemini这类强大的工具，一句话就能生成一个有趣的应用，这种体验无疑是令人兴奋的。然而，当兴奋感褪去，所有开发者都会直面一个核心痛点：这些应用都运行在AI Studio的沙盒里，不仅自己使用不便，更难以轻松地分享给朋友或潜在用户。

将这些AI实验品部署成一个公开的网站，是把想法变为现实的关键一步。但这个过程并非一帆风顺，我们需要区分两种情况：一种是不涉及实时AI调用的静态应用，另一种是需要与Gemini API交互的动态AI应用。它们的部署路径和遇到的"坑"截然不同。本文将分享我在部署这两种应用时总结出的几个最关键的实践心得，帮助你顺利地从AI实验场走向真实世界。

## 1. 意外的"手动挡"：AI生成的代码也需要手动修复

让我们先从最简单的静态应用开始。第一个令人惊讶的发现是，即便是从AI Studio直接导出的静态网页项目（例如基于React和Vite构建的应用），也无法直接部署成功。

问题出在一个容易被忽略的细节上：项目的核心文件index.html中，缺少了引用React入口文件的关键代码。这意味着，如果你不进行任何修改就直接部署，网站将无法正确加载和运行。

因此，在部署之前，你必须手动编辑index.html文件，在`<body>`标签的末尾添加下面这行缺失的代码：

```html
<script type="module" src="/src/main.jsx"></script>
```

此外，还有一个聪明的技巧。这类静态项目虽然不调用AI，但其构建脚本可能仍然需要一个API Key环境变量才能成功运行。为了绕过这个问题，你可以在部署平台（如Vercel或Netlify）上设置一个假的API Key。例如，添加一个名为`GEMINI_API_KEY`的环境变量，值可以随便填写，比如"placeholder"。这能满足构建过程的需要，又不会带来任何安全风险。

## 2. 安全第一课：API Key绝不能暴露在前端

现在，我们进入更复杂的动态AI应用部署。这里最核心、也最严重的问题就是API Key的安全。

通俗地讲，前端代码是运行在用户浏览器里的，这意味着任何人都可以在你的网站上右键"查看网页源代码"，从而看到前端的所有代码。如果你的Gemini API Key直接写在前端代码里，就相当于把你的账户密钥公之于众。

一旦API Key泄露，任何人都可以用你的密钥去调用API，由此产生的所有费用都将由你承担，这可能导致难以控制的经济损失。因此，将一个包含明文API Key的纯前端项目直接部署到Vercel或Netlify等平台是极其危险的行为。

## 3. API Key的"保险箱"：两种主流的保护方案

既然不能把API Key放在前端，我们该如何安全地保管它？目前主流的解决方案有两种。

### 第一种方法：Google Cloud一键部署

这是AI Studio官方提供的便捷方案。它的原理是利用Google Cloud的网关功能（API Proxy）来自动保护你的API Key。

- **工作流程**：用户的浏览器请求会先发送到你网站的代理地址。接着，谷歌的服务器在后端接收到这个请求，自动附加上你真实的API Key，再将请求转发给Gemini。
- **优点**：整个过程中，API Key从未出现在前端，从而得到了有效保护。
- **前提条件**：你需要拥有一个已经绑定了信用卡并设置好结算信息的Google Cloud项目。

### 第二种方法：重构为前后端分离应用

这是一种更通用、更灵活的专业方案，也是业界的标准做法。

- **核心思路**：将原本的纯前端项目，改造成一个包含后端服务的全栈应用（例如使用Next.js框架）。将API Key安全地存储在后端服务器的环境变量中，所有对Gemini API的调用都由后端代码来完成。
- **优点**：前端只与我们自己的后端接口进行通信，用户的浏览器永远接触不到真实的API Key，实现了彻底的安全隔离。这种架构也为未来增加用户系统、数据库等复杂功能打下了坚实基础。

### 方案对比

- **Google Cloud方案**：最适合快速验证和便捷部署，但会将你锁定在Google的生态系统内，且需要绑定结算账户。
- **后端重构方案**：初期工作量稍大，但是一个平台无关、更安全、可扩展性更强的长远之计，是专业产品的必经之路。

## 4. 用AI改造AI：让AI编程助手完成代码重构

将纯前端项目重构为Next.js全栈应用听起来可能很复杂，但这里有一个非常现代且高效的工作流程：使用AI编程工具来辅助完成这项工作。

你可以向AI编程助手提供一个清晰的指令，让它来执行代码改造。一个有效的提示词（Prompt）示例应该是这样的：

> "把这个项目改造成一个 Next.js 的前后端分离应用。注意：Gemini 的 API key 要安全地存放在后端，需要在后端调用 AI 功能，确保我的 API key 不会泄露。"

这个方法的价值在于，它展示了AI不仅能生成应用原型，还能帮助开发者完成保障安全性的复杂代码重构。这极大地提升了开发效率，让开发者可以更专注于应用的核心逻辑。

## 5. 免费的代价：部署平台选择的"地域智慧"

当代码准备就绪后，无论部署的是静态还是动态应用，选择一个合适的免费平台都至关重要，特别是当你的目标用户在国内时。

根据实践经验，几个主流的免费平台在域名访问性上存在显著差异：

- **Vercel**：它生成的默认域名（例如 xxx.vercel.app）在国内无法直接访问。如果你想让国内用户使用，必须为其绑定一个你自己的、已经备案的域名。
- **Netlify 和 腾讯云 Webify**：这两个平台生成的免费域名在国内可以直接访问。对于没有个人域名或不想进行复杂配置的开发者来说，它们是更方便快捷的选择。

因此，在选择部署平台时，务必考虑你的用户群体所在地，做出明智的"地域"选择。

## 结论：部署只是起点

回顾本文，我们分享了将AI Studio应用部署到真实网站的几个核心经验：从修复静态应用的手动挡问题，到保护动态AI应用API Key的两种主流方案，再到利用AI助手高效重构代码，以及根据用户地域选择合适的部署平台。

然而，成功部署一个能在线访问的应用，仅仅是漫长旅程的开始。一个真正的产品，还需要考虑更多，例如使用 Supabase 搭建用户系统和权限管理，或是集成 Stripe 实现支付功能。部署上线，意味着你的应用开始接受真实世界的考验。

现在，你已经掌握了将AI应用从想法变为现实的关键步骤，你的下一个项目会是什么？更重要的是，你将如何让它不止是一个玩具，而是一个能稳定服务的真正产品？

## 参考资料

- [Gemini应用：免费部署独立网站](https://youtu.be/1joStDlw9lg?list=TLGG5dSJHMV1HL4wOTEyMjAyNQ)
